<div class="profile-container">
    <h2>Mon Profil</h2>
    <p class="role-tag">Rôle: **{{ user?.role | uppercase }}**</p>

    <div *ngIf="isLoading">Chargement des informations de l'utilisateur...</div>
    <div *ngIf="error" class="alert-error">{{ error }}</div>
    <div *ngIf="successMessage" class="alert-success">{{ successMessage }}</div>

    <ng-container *ngIf="user && !isLoading">
        
        <div class="profile-actions">
            <button (click)="toggleEdit()" class="btn-primary">
                {{ isEditing ? 'Annuler la Modification' : 'Modifier les Informations' }}
            </button>
        </div>

        <div class="profile-details card">
            
            <form *ngIf="isEditing" (ngSubmit)="saveProfile()">
                <h3>Modifier le Profil</h3>
                
                <div class="form-group">
                    <label for="name">Nom Complet</label>
                    <input id="name" name="name" [(ngModel)]="updatedUser.name" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Email</label>
                    <input id="email" name="email" [(ngModel)]="updatedUser.email" type="email" required>
                </div>
                
                <div class="form-group">
                    <label for="phone">Téléphone</label>
                    <input id="phone" name="phone" [(ngModel)]="updatedUser.phone" type="tel">
                </div>
                
                <button type="submit" class="btn-save">Enregistrer les Changements</button>
            </form>

            <div *ngIf="!isEditing">
                <h3>Informations Utilisateur</h3>
                <div class="info-row"><strong>ID:</strong> <span>{{ user.id }}</span></div>
                <div class="info-row"><strong>Nom:</strong> <span>{{ user.name }}</span></div>
                <div class="info-row"><strong>Email:</strong> <span>{{ user.email }}</span></div>
                <div class="info-row"><strong>Téléphone:</strong> <span>{{ user.phone || 'N/A' }}</span></div>
                <div class="info-row"><strong>Membre depuis:</strong> <span>{{ user.created_at | date:'mediumDate' }}</span></div>
            </div>
        </div>
    </ng-container>
</div>